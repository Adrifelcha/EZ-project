---
title: "EZBHDDM: Short exercise on hypothesis testing"
author: "Adriana F. Chávez De la Peña"
date: "`r Sys.Date()`"
output:
  rmdformats::material:
    self_contained: true
    thumbnails: false
    lightbox: true
    gallery: true
    cards: false
    highlight: tango
    fig_width: 12 
    fig_height: 8 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(rmdformats)
```

# Introduction

\begin{align*}
\mathbf{Y} \sim \mbox{DDM}\bigl(\alpha, \nu, \tau \bigl)
\end{align*}

## The EZBHDDM

\begin{align*}
Y &\Rightarrow \{\dot{T}, \dot{M}, \dot{V}\}\\
\dot{T} &\sim \mbox{Binomial}(PC,N)\\
\dot{V} &\sim \mbox{Normal}(\frac{1}{PRT},\frac{N-1}{2(PRT)^2})\\
\dot{M} &\sim \mbox{Normal}(MRT, PRT \times N)\\
PC &= \frac{1}{\exp(-\alpha\nu)+1}\\
MRT &= \tau + \frac{\alpha}{2\nu}\frac{\exp(-\alpha\nu)-1}{\exp(-\alpha\nu)+1}\\
PRT &= \frac{\alpha}{2\nu^3}\{\frac{1-2\alpha\nu\exp(-\alpha\nu)-\exp(-\alpha\nu)^2}{(\exp(-\alpha\nu)+1)^2}\}
\end{align*}

## Model Types included in this template

1. `hierarchical`

2. `metaregression`

3 .`ttest`

# Custom functions

## Simulation setup functions

```{r, echo=FALSE}
for(archive in dir("../../code/functions/")){    source(paste("../../code/functions/",archive,sep=""))     }
for(archive in dir("../../code/scripts/")){    
  if(length(which(grepl("HDDM",archive)))!=0){  source(paste("../../code/scripts/",archive,sep="")) }    
}
source("../../code/scripts/HDDM_simFixedEffect.R")
source("./writefixEffJAGSmodel.R")
```


```{r}
HDDM_simFixedEffect(nParticipants = 20, nTrialsPerCondition = 200, nDatasets = 1000, beta.effect = 0.5, priors = NA,
                    n.chains = 4, Show = TRUE, forceSim = FALSE, fromPrior = TRUE)
```